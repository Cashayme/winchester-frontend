import{A as G,B as H,f as J,g as D,h as N,i as y,o as r,w as d,r as h,a as t,c,p as g,C as K,D as $,q as M,n as p,d as w,t as O,F,x as L,s as E,j as R,P as Q,E as X,k as Y,l as P,m as Z,G as C,b as l,H as _,I as ee,_ as te}from"./CX9Q0U3t.js";import{_ as se}from"./M818aj8r.js";const ae={slots:{root:"relative overflow-hidden w-full rounded-lg p-4 flex gap-2.5",wrapper:"min-w-0 flex-1 flex flex-col",title:"text-sm font-medium",description:"text-sm opacity-90",icon:"shrink-0 size-5",avatar:"shrink-0",avatarSize:"2xl",actions:"flex flex-wrap gap-1.5 shrink-0",close:"p-0"},variants:{color:{primary:"",secondary:"",success:"",info:"",warning:"",error:"",neutral:""},variant:{solid:"",outline:"",soft:"",subtle:""},orientation:{horizontal:{root:"items-center",actions:"items-center"},vertical:{root:"items-start",actions:"items-start mt-2.5"}},title:{true:{description:"mt-1"}}},compoundVariants:[{color:"primary",variant:"solid",class:{root:"bg-primary text-inverted"}},{color:"secondary",variant:"solid",class:{root:"bg-secondary text-inverted"}},{color:"success",variant:"solid",class:{root:"bg-success text-inverted"}},{color:"info",variant:"solid",class:{root:"bg-info text-inverted"}},{color:"warning",variant:"solid",class:{root:"bg-warning text-inverted"}},{color:"error",variant:"solid",class:{root:"bg-error text-inverted"}},{color:"primary",variant:"outline",class:{root:"text-primary ring ring-inset ring-primary/25"}},{color:"secondary",variant:"outline",class:{root:"text-secondary ring ring-inset ring-secondary/25"}},{color:"success",variant:"outline",class:{root:"text-success ring ring-inset ring-success/25"}},{color:"info",variant:"outline",class:{root:"text-info ring ring-inset ring-info/25"}},{color:"warning",variant:"outline",class:{root:"text-warning ring ring-inset ring-warning/25"}},{color:"error",variant:"outline",class:{root:"text-error ring ring-inset ring-error/25"}},{color:"primary",variant:"soft",class:{root:"bg-primary/10 text-primary"}},{color:"secondary",variant:"soft",class:{root:"bg-secondary/10 text-secondary"}},{color:"success",variant:"soft",class:{root:"bg-success/10 text-success"}},{color:"info",variant:"soft",class:{root:"bg-info/10 text-info"}},{color:"warning",variant:"soft",class:{root:"bg-warning/10 text-warning"}},{color:"error",variant:"soft",class:{root:"bg-error/10 text-error"}},{color:"primary",variant:"subtle",class:{root:"bg-primary/10 text-primary ring ring-inset ring-primary/25"}},{color:"secondary",variant:"subtle",class:{root:"bg-secondary/10 text-secondary ring ring-inset ring-secondary/25"}},{color:"success",variant:"subtle",class:{root:"bg-success/10 text-success ring ring-inset ring-success/25"}},{color:"info",variant:"subtle",class:{root:"bg-info/10 text-info ring ring-inset ring-info/25"}},{color:"warning",variant:"subtle",class:{root:"bg-warning/10 text-warning ring ring-inset ring-warning/25"}},{color:"error",variant:"subtle",class:{root:"bg-error/10 text-error ring ring-inset ring-error/25"}},{color:"neutral",variant:"solid",class:{root:"text-inverted bg-inverted"}},{color:"neutral",variant:"outline",class:{root:"text-highlighted bg-default ring ring-inset ring-default"}},{color:"neutral",variant:"soft",class:{root:"text-highlighted bg-elevated/50"}},{color:"neutral",variant:"subtle",class:{root:"text-highlighted bg-elevated/50 ring ring-inset ring-accented"}}],defaultVariants:{color:"primary",variant:"solid"}},re={__name:"Alert",props:{as:{type:null,required:!1},title:{type:String,required:!1},description:{type:String,required:!1},icon:{type:String,required:!1},avatar:{type:Object,required:!1},color:{type:null,required:!1},variant:{type:null,required:!1},orientation:{type:null,required:!1,default:"vertical"},actions:{type:Array,required:!1},close:{type:[Boolean,Object],required:!1},closeIcon:{type:String,required:!1},class:{type:null,required:!1},ui:{type:null,required:!1}},emits:["update:open"],setup(s,{emit:z}){const a=s,W=z,u=G(),{t:U}=H(),k=J(),o=D(()=>{var n;return N({extend:N(ae),...((n=k.ui)==null?void 0:n.alert)||{}})({color:a.color,variant:a.variant,orientation:a.orientation,title:!!a.title||!!u.title})});return(n,m)=>{var j;return r(),y(R(Q),{as:s.as,"data-orientation":s.orientation,class:p(o.value.root({class:[(j=a.ui)==null?void 0:j.root,a.class]}))},{default:d(()=>{var q,V,i,e,b,A,f,S;return[h(n.$slots,"leading",{},()=>{var v,x,I;return[s.avatar?(r(),y(K,$({key:0,size:((v=a.ui)==null?void 0:v.avatarSize)||o.value.avatarSize()},s.avatar,{class:o.value.avatar({class:(x=a.ui)==null?void 0:x.avatar})}),null,16,["size","class"])):s.icon?(r(),y(M,{key:1,name:s.icon,class:p(o.value.icon({class:(I=a.ui)==null?void 0:I.icon}))},null,8,["name","class"])):g("",!0)]}),t("div",{class:p(o.value.wrapper({class:(q=a.ui)==null?void 0:q.wrapper}))},[s.title||u.title?(r(),c("div",{key:0,class:p(o.value.title({class:(V=a.ui)==null?void 0:V.title}))},[h(n.$slots,"title",{},()=>[w(O(s.title),1)])],2)):g("",!0),s.description||u.description?(r(),c("div",{key:1,class:p(o.value.description({class:(i=a.ui)==null?void 0:i.description}))},[h(n.$slots,"description",{},()=>[w(O(s.description),1)])],2)):g("",!0),s.orientation==="vertical"&&((e=s.actions)!=null&&e.length||u.actions)?(r(),c("div",{key:2,class:p(o.value.actions({class:(b=a.ui)==null?void 0:b.actions}))},[h(n.$slots,"actions",{},()=>[(r(!0),c(F,null,L(s.actions,(v,x)=>(r(),y(E,$({key:x,size:"xs"},{ref_for:!0},v),null,16))),128))])],2)):g("",!0)],2),s.orientation==="horizontal"&&((A=s.actions)!=null&&A.length||u.actions)||s.close?(r(),c("div",{key:0,class:p(o.value.actions({class:(f=a.ui)==null?void 0:f.actions,orientation:"horizontal"}))},[s.orientation==="horizontal"&&((S=s.actions)!=null&&S.length||u.actions)?h(n.$slots,"actions",{key:0},()=>[(r(!0),c(F,null,L(s.actions,(v,x)=>(r(),y(E,$({key:x,size:"xs"},{ref_for:!0},v),null,16))),128))]):g("",!0),h(n.$slots,"close",{ui:o.value},()=>{var v;return[s.close?(r(),y(E,$({key:0,icon:s.closeIcon||R(k).ui.icons.close,color:"neutral",variant:"link","aria-label":R(U)("alert.close")},typeof s.close=="object"?s.close:{},{class:o.value.close({class:(v=a.ui)==null?void 0:v.close}),onClick:m[0]||(m[0]=x=>W("update:open",!1))}),null,16,["icon","aria-label","class"])):g("",!0)]})],2)):g("",!0)]}),_:3},8,["as","data-orientation","class"])}}},B=X("/winchester_shield_transparent.png"),ie={class:"min-h-screen",style:{background:`radial-gradient(1200px 700px at 80% -10%, rgba(160,31,31,0.08), transparent 60%),
      radial-gradient(900px 600px at 15% 120%, rgba(138,92,246,0.05), transparent 55%),
      linear-gradient(180deg, #0b0d12 0%, #0e1219 100%)`}},oe={key:0,class:"min-h-screen flex items-center justify-center p-4"},ne={class:"w-full max-w-lg"},le={class:"text-center"},ce={class:"space-y-6"},de={class:"text-center"},ue={key:1,class:"min-h-screen flex items-center justify-center p-4"},ve={class:"w-full max-w-lg"},be={class:"text-center"},ge={class:"relative mb-6"},me={key:2,class:"min-h-screen flex items-center justify-center p-4"},fe={class:"w-full max-w-lg"},xe={class:"text-center"},pe={class:"relative mb-4"},ye={class:"text-center space-y-6"},he={class:"border-t border-[rgba(255,255,255,0.1)] pt-4"},we={key:3,class:"min-h-screen flex items-center justify-center p-4"},ke={class:"w-full max-w-lg"},Ae={class:"text-center"},ze={class:"relative mb-6"},T="https://backend.winchester-ascendancy.com/api",je=Y({__name:"login",setup(s){const z=ee(),a=_(),W=D(()=>z.query.redirect||"/chests"),u=D(()=>z.query.error),U={access_denied:"Accès refusé. Vous n'avez pas les permissions nécessaires.",server_error:"Erreur serveur. Veuillez réessayer plus tard.",network_error:"Erreur de connexion. Vérifiez votre connexion internet."},k=D(()=>u.value?U[u.value]||"Une erreur inconnue s'est produite.":null),o=P(null),n=P(!0),m=P(!1);async function j(){try{const i=await fetch(`${T}/auth/discord`,{credentials:"include"});if(!i.ok)throw new Error(`Erreur HTTP: ${i.status}`);const{authUrl:e}=await i.json();window.location.href=e}catch(i){console.error("Erreur lors de la connexion Discord:",i),alert("Erreur lors de la connexion à Discord. Veuillez réessayer.")}}async function q(){try{await fetch(`${T}/auth/logout`,{method:"POST",credentials:"include"}),o.value=null,m.value=!1,a.push("/login")}catch(i){console.error("Erreur lors de la déconnexion:",i)}}async function V(){try{console.log("🔄 Démarrage de la vérification de session...");const i=await fetch(`${T}/auth/me`,{credentials:"include"});if(i.ok){const e=await i.json();o.value=e.user,m.value=e.hasAccess,console.log("✅ Vérification de session terminée"),o.value&&m.value&&setTimeout(()=>{a.push(W.value)},1e3)}else console.log("❌ Session non valide")}catch(i){console.error("Erreur lors de la vérification de session:",i)}finally{n.value=!1}}return Z(()=>{V()}),(i,e)=>{const b=M,A=re,f=se,S=E;return r(),c("div",ie,[o.value?n.value?(r(),c("div",ue,[t("div",ve,[e[9]||(e[9]=C('<div class="text-center mb-8" data-v-9b5b403c><div class="relative mb-6" data-v-9b5b403c><img src="'+B+'" alt="Blason Winchester Ascendancy" class="w-40 h-40 mx-auto filter drop-shadow-lg opacity-60 shield-animation object-contain" data-v-9b5b403c><div class="absolute inset-0 w-40 h-40 mx-auto rounded-full bg-red-500/20 blur-xl -z-10" data-v-9b5b403c></div></div><h1 class="text-3xl font-display font-bold title-gradient mb-2" data-v-9b5b403c> Winchester Ascendancy </h1><div class="bar-copper w-24 mx-auto" data-v-9b5b403c></div></div>',1)),l(f,{class:"panel brushed ring-blood"},{default:d(()=>[t("div",be,[t("div",ge,[l(b,{name:"i-mdi-loading",class:"w-16 h-16 mx-auto text-blood-400 animate-spin"}),e[5]||(e[5]=t("div",{class:"absolute inset-0 w-16 h-16 mx-auto rounded-full bg-blood-500/20 blur-lg"},null,-1))]),e[6]||(e[6]=t("h2",{class:"text-xl font-bold text-white font-display mb-2"}," Vérification en cours... ",-1)),e[7]||(e[7]=t("p",{class:"text-sm text-gray-400 mb-6"}," Validation de votre session et autorisations Discord ",-1)),e[8]||(e[8]=t("div",{class:"space-y-4"},[t("div",{class:"flex items-center gap-3 justify-center"},[t("div",{class:"w-2 h-2 bg-blue-500 rounded-full animate-pulse"}),t("span",{class:"text-sm text-gray-300"},"Connexion Discord")]),t("div",{class:"flex items-center gap-3 justify-center"},[t("div",{class:"w-2 h-2 bg-blue-500 rounded-full animate-pulse",style:{"animation-delay":"0.2s"}}),t("span",{class:"text-sm text-gray-300"},"Validation du profil")]),t("div",{class:"flex items-center gap-3 justify-center"},[t("div",{class:"w-2 h-2 bg-blue-500 rounded-full animate-pulse",style:{"animation-delay":"0.4s"}}),t("span",{class:"text-sm text-gray-300"},"Vérification des rôles")]),t("div",{class:"flex items-center gap-3 justify-center"},[t("div",{class:"w-2 h-2 bg-green-500 rounded-full animate-pulse",style:{"animation-delay":"0.6s"}}),t("span",{class:"text-sm text-gray-300"},"Accès autorisé")])],-1))])]),_:1})])])):m.value?(r(),c("div",we,[t("div",ke,[e[22]||(e[22]=C('<div class="text-center mb-8" data-v-9b5b403c><div class="relative mb-6" data-v-9b5b403c><img src="'+B+'" alt="Blason Winchester Ascendancy" class="w-40 h-40 mx-auto filter drop-shadow-lg shield-animation object-contain" data-v-9b5b403c><div class="absolute inset-0 w-40 h-40 mx-auto rounded-full bg-green-500/20 blur-xl -z-10" data-v-9b5b403c></div></div><h1 class="text-3xl font-display font-bold title-gradient mb-2" data-v-9b5b403c> Winchester Ascendancy </h1><div class="bar-copper w-24 mx-auto" data-v-9b5b403c></div></div>',1)),l(f,{class:"panel brushed ring-blood"},{default:d(()=>[t("div",Ae,[t("div",ze,[l(b,{name:"i-mdi-check-circle",class:"w-16 h-16 mx-auto text-green-400"}),e[18]||(e[18]=t("div",{class:"absolute inset-0 w-16 h-16 mx-auto rounded-full bg-green-500/20 blur-lg"},null,-1))]),e[19]||(e[19]=t("h2",{class:"text-xl font-bold text-white font-display mb-2"}," Authentification réussie ! ",-1)),e[20]||(e[20]=t("p",{class:"text-sm text-gray-400 mb-6"}," Redirection vers l'application... ",-1)),e[21]||(e[21]=t("div",{class:"space-y-4"},[t("div",{class:"relative"},[t("div",{class:"h-2 bg-gray-700 rounded-full overflow-hidden"},[t("div",{class:"h-full bg-gradient-to-r from-blood-500 to-blood-400 rounded-full animate-pulse",style:{width:"100%",animation:"progress 2s ease-in-out"}})])]),t("p",{class:"text-xs text-gray-500"}," Préparation de votre espace de travail... ")],-1))])]),_:1})])])):(r(),c("div",me,[t("div",fe,[e[17]||(e[17]=C('<div class="text-center mb-8" data-v-9b5b403c><div class="relative mb-6" data-v-9b5b403c><img src="'+B+'" alt="Blason Winchester Ascendancy" class="w-40 h-40 mx-auto filter drop-shadow-lg opacity-40 shield-animation object-contain" data-v-9b5b403c><div class="absolute inset-0 w-40 h-40 mx-auto rounded-full bg-red-500/20 blur-xl -z-10" data-v-9b5b403c></div></div><h1 class="text-3xl font-display font-bold text-gray-400 mb-2" data-v-9b5b403c> Winchester Ascendancy </h1><div class="bar-copper w-24 mx-auto opacity-50" data-v-9b5b403c></div></div>',1)),l(f,{class:"panel brushed ring-blood"},{header:d(()=>[t("div",xe,[t("div",pe,[l(b,{name:"i-mdi-shield-off",class:"w-12 h-12 mx-auto text-red-400"}),e[10]||(e[10]=t("div",{class:"absolute inset-0 w-12 h-12 mx-auto rounded-full bg-red-500/20 blur-lg"},null,-1))]),e[11]||(e[11]=t("h2",{class:"text-xl font-bold text-white font-display"}," Accès Refusé ",-1)),e[12]||(e[12]=t("p",{class:"text-sm text-gray-400 mt-2"}," Autorisation insuffisante ",-1))])]),default:d(()=>[t("div",ye,[e[16]||(e[16]=t("p",{class:"text-gray-400"}," Vous n'avez pas les autorisations nécessaires pour accéder à cette application. ",-1)),l(A,{color:"amber",variant:"subtle",icon:"i-mdi-shield-alert",class:"border-amber-500/20"},{title:d(()=>[...e[13]||(e[13]=[w(" Rôle requis sur le serveur Discord ",-1)])]),default:d(()=>[e[14]||(e[14]=w(" Contactez un administrateur pour obtenir les permissions nécessaires. ",-1))]),_:1}),t("div",he,[l(S,{onClick:q,icon:"i-mdi-logout",color:"gray",variant:"outline",class:"w-full",size:"lg"},{default:d(()=>[...e[15]||(e[15]=[w(" Retour à la connexion ",-1)])]),_:1})])])]),_:1})])])):(r(),c("div",oe,[t("div",ne,[e[4]||(e[4]=C('<div class="text-center mb-8" data-v-9b5b403c><div class="relative mb-6" data-v-9b5b403c><img src="'+B+'" alt="Blason Winchester Ascendancy" class="w-64 h-64 mx-auto filter drop-shadow-lg shield-animation object-contain" data-v-9b5b403c><div class="absolute inset-0 w-64 h-64 mx-auto rounded-full bg-red-500/20 blur-xl -z-10" data-v-9b5b403c></div><div class="absolute bottom-0 left-1/2 transform -translate-x-1/2 translate-y-2" data-v-9b5b403c><h1 class="text-4xl font-display font-bold title-gradient-dark mb-2 drop-shadow-2xl" data-v-9b5b403c> Winchester Ascendancy </h1></div></div><div class="h-8" data-v-9b5b403c></div><p class="text-sm text-gray-400 font-medium tracking-wide uppercase" data-v-9b5b403c> Gestionnaire de Coffres </p></div>',1)),l(f,{class:"panel brushed ring-blood"},{header:d(()=>[t("div",le,[l(b,{name:"i-mdi-shield-account",class:"w-12 h-12 mx-auto mb-3 text-blood-400"}),e[0]||(e[0]=t("h2",{class:"text-xl font-bold text-white font-display"}," Accès Sécurisé ",-1)),e[1]||(e[1]=t("p",{class:"text-sm text-gray-400 mt-2"}," Authentification requise pour continuer ",-1))])]),default:d(()=>[t("div",ce,[k.value?(r(),y(A,{key:0,color:"red",variant:"subtle",title:k.value,icon:"i-mdi-alert-circle",class:"border-red-500/20"},null,8,["title"])):g("",!0),t("div",de,[t("button",{onClick:j,class:"flex items-center justify-center gap-2 bg-[#5865F2] hover:bg-[#4752c4] text-white border-none rounded-lg px-4 py-3 text-base font-medium cursor-pointer transition-all duration-200 hover:scale-105 hover:shadow-lg w-full"},[l(b,{name:"i-mdi-discord",class:"w-5 h-5 flex-shrink-0"}),e[2]||(e[2]=w(" Se connecter avec Discord ",-1))])]),e[3]||(e[3]=t("div",{class:"border-t border-[rgba(255,255,255,0.1)] pt-4"},[t("div",{class:"text-center space-y-2"},[t("p",{class:"text-xs text-gray-500"}," 🔒 Connexion sécurisée via Discord OAuth "),t("p",{class:"text-xs text-gray-500"}," 👥 Accès réservé aux membres autorisés ")])],-1))])]),_:1})])]))])}}}),Se=te(je,[["__scopeId","data-v-9b5b403c"]]);export{Se as default};
